<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/vlasiator_manual/libs/highlight/github.min.css"> <link rel=stylesheet  href="/vlasiator_manual/css/jtd.css"> <link rel=icon  href="/vlasiator_manual/assets/favicon.ico"> <title>Testing</title> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/vlasiator_manual/" class=title > Vlasiator </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item "><a href="/vlasiator_manual/" class="menu-list-link ">Home</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu1/" class="menu-list-link ">Installation</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu2/" class="menu-list-link ">Run</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu3/" class="menu-list-link ">Postprocessing</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu4/" class="menu-list-link ">Internal</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="#" class=menu-list-link >SysBoundary</a> </ul> <li class="menu-list-item "><a href="/vlasiator_manual/menu5/" class="menu-list-link active">Misc</a> </ul> </div> <div class=footer > This is <em>Just the docs</em>, adapted from the <a href="https://github.com/pmarsceill/just-the-docs" target=_blank >Jekyll theme</a>. </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <a id=github  href="/vlasiator_manual//github.com/fmihpc/vlasiator">Vlasiator on GitHub</a> </div> <div class=franklin-content ><h1 id=testing ><a href="#testing" class=header-anchor >Testing</a></h1> <div class=franklin-toc ><ol><li><a href="#demo">Demo</a></ol></div> <p>There exists some test funtionalities under the <code>testpackages</code> folder, but it is not good enough.</p> <ul> <li><p>Currently one can compare the output from one version of the code to another version, but obviously there are many problems with this approach. How can you guarantee the version you select generate the correct &quot;reference&quot; solutions?</p> <li><p>The shell scripts are written for specific machines, but none of them are running on a regular basis.</p> <li><p>One has to do many extra work to create tests on a new machine.</p> <li><p>We cannot pick a specific test to run easily with one command.</p> </ul> <p>To tackle these problems, I am thinking about redesign the whole test suites. The goal is to</p> <ul> <li><p>define reference solutions to compare with;</p> <li><p>create a flexible test list with <code>make</code>;</p> <li><p>introduce continuous integration &#40;CI&#41; to validate new development and changes</p> </ul> <p>There is a tool written in C&#43;&#43; called <code>vlsvdiff</code> that can be used to compare two VLSV files. This can be used to investigate the differences between files. For automated tests, it is enough to know that there are differences. The difficulties for VLSV file format result from the random writing order from MPI processes. If you are running with multiple MPI processes, you may get different SHA values out of the VLSV file even if the data are actually identical.</p> <p>How to store the reference solutions? Well, they should be saved in a different repository to keep the main source repo clean.</p> <h2 id=demo ><a href="#demo" class=header-anchor >Demo</a></h2> <pre><code class="shell hljs">make test_flowthrough</code></pre>
<div class=page-foot >
  <div class=copyright >
    &copy; Hongyang Zhou. Last modified: February 20, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
    </div> 
    </div> 
    </div> <!-- end of class page-wrap-->