<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/vlasiator_manual/libs/katex/katex.min.css"> <link rel=stylesheet  href="/vlasiator_manual/css/jtd.css"> <link rel=icon  href="/vlasiator_manual/assets/favicon.ico"> <title>Misc</title> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/vlasiator_manual/" class=title > Vlasiator </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item "><a href="/vlasiator_manual/" class="menu-list-link ">Home</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu1/" class="menu-list-link ">Installation</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/vlasiator_manual/menu1/#dccrg" class=menu-list-link >DCCRG</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu1/#zoltan" class=menu-list-link >Zoltan</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu1/#boost" class=menu-list-link >Boost</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu1/#eigen" class=menu-list-link >Eigen</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu1/#jemalloc" class=menu-list-link >Jemalloc</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu1/#phiprof" class=menu-list-link >PhiProf</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu1/#papi" class=menu-list-link >Papi</a> </ul> <li class="menu-list-item "><a href="/vlasiator_manual/menu2/" class="menu-list-link ">Run</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu3/" class="menu-list-link ">Postprocessing</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu4/" class="menu-list-link ">Internal</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="/vlasiator_manual/menu4/#sysboundary" class=menu-list-link >SysBoundary</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu4/#vlasov_solver" class=menu-list-link >Vlasov Solver</a> </ul> <li class="menu-list-item "><a href="/vlasiator_manual/menu5/" class="menu-list-link ">Test</a> <li class="menu-list-item active"><a href="/vlasiator_manual/menu6/" class="menu-list-link active">Misc</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu7/" class="menu-list-link ">Method</a> <li class="menu-list-item "><a href="/vlasiator_manual/menu8/" class="menu-list-link ">Trouble Shooting</a> </ul> </div> <div class=footer > This is <em>Just the docs</em>, adapted from the <a href="https://github.com/pmarsceill/just-the-docs" target=_blank >Jekyll theme</a>. </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <a id=github  href="/vlasiator_manual//github.com/fmihpc/vlasiator">Vlasiator on GitHub</a> </div> <div class=franklin-content ><h1 id=miscellaneous ><a href="#miscellaneous" class=header-anchor >Miscellaneous</a></h1> <div class=franklin-toc ><ol><li><a href="#evlasiator_dealing_with_electrons">eVlasiator: Dealing with Electrons</a><li><a href="#upml_boundary">UPML Boundary</a><ol><li><a href="#derivation">Derivation</a><li><a href="#implementation">Implementation</a></ol><li><a href="#resources">Resources</a></ol></div> <h2 id=evlasiator_dealing_with_electrons ><a href="#evlasiator_dealing_with_electrons" class=header-anchor >eVlasiator: Dealing with Electrons</a></h2> <p>The main Vlasiator is solving the Vlasov equations for ions; this eVlasiator is conceptually the same, just replace the ion with electron. The differences are mainly scales. The normal Vlasiator treats electrons as massless fluid. Possible options to improve that are:</p> <ol> <li><p>fluid with mass;</p> <li><p>electron macro paticles;</p> <li><p>electron distribution function</p> </ol> <p>What is the main difference compared with the test particle approach? Given that the field resolution is on the order of ion scales, how can you guarantee that electron tracing is accurate?</p> <ol> <li><p>B remains static, but E is updated –- this may mean that it is only electrostatic, but to what extent does it matter?</p> </ol> <ol start=2 > <li><p>Not particles, but distributions functions &#40;by solving electron Vlasov eq.&#41;. With enough number of particles, the final result should be the same.</p> </ol> <p>Ion precipitation: sharp cutoff due to sparse velocity grid, need full VDF information &#40;not saved everywhere in the past&#41;. Now implemented as an output option, and use power law extrapolation to get high energy e-, for instance.</p> <ul> <li><p>Electron energy range and spectrum</p> <li><p>Time resolution and length</p> <li><p>2D-3D transformation</p> <li><p>File formats</p> </ul> <h2 id=upml_boundary ><a href="#upml_boundary" class=header-anchor >UPML Boundary</a></h2> <p>In EM field solvers, often we need boundless free-space simulation to prohibit reflecting waves. Back in 1993, a techinque called <em>perfectly matched layer</em> &#40;PML&#41; for the absorption of EM waves was proposed to handle this problem, so that we don&#39;t necessarily need to set boundaries sufficiently far enough from the scatterer when solving interaction problems. With the new medium the theoretical reflection factor of a plane wave striking a vacuum-layer interface is null at any frequency and at any incidence angle, contrary to the previously designed medium with which such a factor is null at normal incidence only. So, the layer surrounding the computational domain can theoretically absorb without reflection any kind of wave travelling towards boundaries, and it can be regarded as a perfectly matched layer. The new medium as the PML medium and the new technique of free-space simulation as the PML technique.</p> <h3 id=derivation ><a href="#derivation" class=header-anchor >Derivation</a></h3> <p>The theoretical derivation starts in discussing the transverse electric wave propagation. One key concept that confused me was the magnetic conductivity denoted as <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>σ</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">\sigma^\ast</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.688696em;vertical-align:0em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span>. Maybe this is just a jargon: permeability is a magnetic analogy to conductivity in electric circuits. Reluctance in a magnetic circuit is inversely proportional to permeability just as electric resistance is inversely proportional to conductivity. The relationships between length and cross-sectional area are also the same. Consequently calling permeability &quot;magnetic conductivity&quot; is a fine way to reinforce the analogy and understand magnetic circuits using an electronic analogy.</p> <p>I guess I need to review my EM courses to fully understand the derivations.</p> <h3 id=implementation ><a href="#implementation" class=header-anchor >Implementation</a></h3> <p>The basic idea is to surround the simulation domain with a lossy region that will damp waves. To prevent reflection at the domain-lossy region interface, the impedance <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi><mo>=</mo><mi>μ</mi><mi mathvariant=normal >/</mi><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\eta=\mu/\epsilon</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">μ</span><span class=mord >/</span><span class="mord mathnormal">ϵ</span></span></span></span> should match at the interface. The key to have a non-reflective boundary for all wave modes is to introduce anisotropy in the permeability and permittivity tensors.</p> <p>As a brief overview, the EM solver updates the magnetic field with Faradays&#39; law &#40;curl of E&#41;, and updates the electric field with one form of the Ohm&#39;s law. The loss term is introduced in the Ohm&#39;s law as <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi><mi mathvariant=bold >j</mi><mo>=</mo><mi mathvariant=normal >/</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>h</mi><mi>b</mi><mi>f</mi><mi>j</mi><mi mathvariant=normal >/</mi><mi>σ</mi></mrow><annotation encoding="application/x-tex">\eta \mathbf{j}=/mathbf{j}/\sigma</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class=mord ><span class="mord mathbf">j</span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mord >/</span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class=mord ><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span><span class=mord >/</span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span> &#40;which, btw, is often called artificial resistivity in plasma physics&#41;. The current density, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant=bold >j</mi></mrow><annotation encoding="application/x-tex">\mathbf{j}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathbf">j</span></span></span></span></span>, is calculated as curl of B from Ampere&#39;s law. </p> <p>So, how do we calculate the loss terms? Well, by introducing an artificial resistivity/conductivity as a function of space. The exact form differs case by case.</p> <h2 id=resources ><a href="#resources" class=header-anchor >Resources</a></h2> <p>CSC, LUMI Now the fastest machine in the US and Europe are both using AMD GPUS. This is definitely not a headless choice, but a strong sign that the CUDA-equivalent compiler is strong enough to compete and easier enough to use. &#40;HIP&#41;</p> <p>On first sight, they may do a pretty decent job: they have preinstalled Julia 1.3&#33;</p> <div class=page-foot > <div class=copyright > &copy; Hongyang Zhou. Last modified: January 29, 2022. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> </div> </div> <!-- end of class page-wrap-->